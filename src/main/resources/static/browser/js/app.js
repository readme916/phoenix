webpackJsonp([6],{"/G8k":function(t,e){},"2XG2":function(t,e){},"5dJx":function(t,e){},D4nx:function(t,e){},"Eq/C":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),i=(n("uMhA"),n("zL8q")),r=n.n(i),s=(n("tvR6"),n("wUZ8")),o=n.n(s),c=(n("yh13"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]}),l=n("VU/8")({name:"app"},c,!1,null,null,null).exports,u=n("/ocq"),d=n("Dd8w"),h=n.n(d),f=n("NYxO"),p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-breadcrumb",{staticClass:"app-breadcrumb",attrs:{separator:"/"}},[n("transition-group",{attrs:{name:"breadcrumb"}},t._l(t.levelList,function(e,a){return e.meta.title?n("el-breadcrumb-item",{key:e.path},["noredirect"===e.redirect||a==t.levelList.length-1?n("span",{staticClass:"no-redirect"},[t._v(t._s(e.meta.title))]):n("router-link",{attrs:{to:e.redirect||e.path}},[t._v(t._s(e.meta.title))])],1):t._e()}))],1)},staticRenderFns:[]};var m=n("VU/8")({created:function(){this.getBreadcrumb()},data:function(){return{levelList:null}},watch:{$route:function(){this.getBreadcrumb()}},methods:{getBreadcrumb:function(){var t=this.$route.matched.filter(function(t){return t.name}),e=t[0];e&&"dashboard"!==e.name&&(t=[{path:"/dashboard",meta:{title:"首页"}}].concat(t)),this.levelList=t}}},p,!1,function(t){n("D4nx")},"data-v-ee85fb4c",null).exports,v={name:"hamburger",props:{isActive:{type:Boolean,default:!1},toggleClick:{type:Function,default:null}}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("svg",{staticClass:"wscn-icon hamburger",class:{"is-active":this.isActive},attrs:{t:"1492500959545",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1691","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"64",height:"64"},on:{click:this.toggleClick}},[e("path",{attrs:{d:"M966.8023 568.849776 57.196677 568.849776c-31.397081 0-56.850799-25.452695-56.850799-56.850799l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 543.397081 998.200404 568.849776 966.8023 568.849776z","p-id":"1692"}}),this._v(" "),e("path",{attrs:{d:"M966.8023 881.527125 57.196677 881.527125c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 856.07443 998.200404 881.527125 966.8023 881.527125z","p-id":"1693"}}),this._v(" "),e("path",{attrs:{d:"M966.8023 256.17345 57.196677 256.17345c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.850799 56.850799-56.850799l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.850799l0 0C1023.653099 230.720755 998.200404 256.17345 966.8023 256.17345z","p-id":"1694"}})])])},staticRenderFns:[]};var w=n("VU/8")(v,g,!1,function(t){n("/G8k")},"data-v-42aa81e1",null).exports,_=n("TIfe"),b=n("mtWM"),V=n.n(b),E={components:{Breadcrumb:m,Hamburger:w},computed:h()({},Object(f.b)(["sidebar","avatar"])),methods:{toggleSideBar:function(){this.$store.dispatch("ToggleSideBar")},logout:function(){var t=this;V.a.post("/logout").then(function(){t.$store.commit("SET_LOGIN_STATE",""),t.$store.commit("SET_ROLE",""),Object(_.b)(),location.reload()})}}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-menu",{staticClass:"navbar",attrs:{mode:"horizontal"}},[n("hamburger",{staticClass:"hamburger-container",attrs:{toggleClick:t.toggleSideBar,isActive:t.sidebar.opened}}),t._v(" "),n("breadcrumb"),t._v(" "),n("el-dropdown",{staticClass:"avatar-container",attrs:{trigger:"click"}},[n("div",{staticClass:"avatar-wrapper"},[n("img",{staticClass:"user-avatar",attrs:{src:t.avatar+"?imageView2/1/w/80/h/80"}}),t._v(" "),n("i",{staticClass:"el-icon-caret-bottom"})]),t._v(" "),n("el-dropdown-menu",{staticClass:"user-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[n("router-link",{staticClass:"inlineBlock",attrs:{to:"/"}},[n("el-dropdown-item",[t._v("\n          Home\n        ")])],1),t._v(" "),n("el-dropdown-item",{attrs:{divided:""}},[n("span",{staticStyle:{display:"block"},on:{click:t.logout}},[t._v("LogOut")])])],1)],1)],1)},staticRenderFns:[]};var S=n("VU/8")(E,T,!1,function(t){n("2XG2")},"data-v-4cdcbf9d",null).exports,C={name:"SidebarItem",props:{routes:{type:Array},isNest:{type:Boolean,default:!1}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"menu-wrapper"},[t._l(t.routes,function(e){return!e.hidden&&e.children?[1!==e.children.length||e.children[0].children||e.alwaysShow?n("el-submenu",{key:e.name,attrs:{index:e.name||e.path}},[n("template",{slot:"title"},[e.meta&&e.meta.icon?n("span",{staticClass:"menu-icon",class:e.meta.icon}):t._e(),t._v(" "),e.meta&&e.meta.title?n("span",[t._v(t._s(e.meta.title))]):t._e()]),t._v(" "),t._l(e.children,function(a){return a.hidden?t._e():[a.children&&a.children.length>0?n("sidebar-item",{key:a.path,staticClass:"nest-menu",attrs:{"is-nest":!0,routes:[a]}}):n("router-link",{key:a.name,attrs:{to:e.path+"/"+a.path}},[n("el-menu-item",{attrs:{index:e.path+"/"+a.path}},[a.meta&&a.meta.icon?n("span",{staticClass:"menu-icon",class:a.meta.icon}):t._e(),t._v(" "),a.meta&&a.meta.title?n("span",[t._v(t._s(a.meta.title))]):t._e()])],1)]})],2):n("router-link",{key:e.children[0].name,attrs:{to:e.path+"/"+e.children[0].path}},[n("el-menu-item",{class:{"submenu-title-noDropdown":!t.isNest},attrs:{index:e.path+"/"+e.children[0].path}},[e.children[0].meta&&e.children[0].meta.icon?n("span",{staticClass:"menu-icon",class:e.children[0].meta.icon}):t._e(),t._v(" "),e.children[0].meta&&e.children[0].meta.title?n("span",[t._v(t._s(e.children[0].meta.title))]):t._e()])],1)]:t._e()})],2)},staticRenderFns:[]},x={name:"scrollBar",data:function(){return{top:0}},methods:{handleScroll:function(t){var e=t.wheelDelta||3*-t.deltaY,n=this.$refs.scrollContainer.offsetHeight,a=this.$refs.scrollWrapper.offsetHeight;e>0?this.top=Math.min(0,this.top+e):n-15<a?this.top<-(a-n+15)?this.top=this.top:this.top=Math.max(this.top+e,n-a-15):this.top=0}}},$={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"scrollContainer",staticClass:"scroll-container",on:{wheel:function(e){e.preventDefault(),t.handleScroll(e)}}},[n("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",style:{top:t.top+"px"}},[t._t("default")],2)])},staticRenderFns:[]};var k={components:{SidebarItem:n("VU/8")(C,y,!1,null,null,null).exports,ScrollBar:n("VU/8")(x,$,!1,function(t){n("hF5t")},"data-v-f8f01a0e",null).exports},computed:h()({},Object(f.b)(["sidebar"]),{routes:function(){return this.$store.getters.menus},isCollapse:function(){return!this.sidebar.opened}})},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("scroll-bar",[e("el-menu",{attrs:{mode:"vertical","unique-opened":"","default-active":this.$route.path,collapse:this.isCollapse,"background-color":"#304156","text-color":"#fff","active-text-color":"#409EFF"}},[e("sidebar-item",{attrs:{routes:this.routes}})],1)],1)},staticRenderFns:[]},O=n("VU/8")(k,A,!1,null,null,null).exports,L=n("BO1k"),I=n.n(L),M={name:"scrollPane",data:function(){return{left:0}},methods:{handleScroll:function(t){var e=t.wheelDelta||3*-t.deltaY,n=this.$refs.scrollContainer.offsetWidth,a=this.$refs.scrollWrapper.offsetWidth;e>0?this.left=Math.min(0,this.left+e):n-15<a?this.left<-(a-n+15)?this.left=this.left:this.left=Math.max(this.left+e,n-a-15):this.left=0},moveToTarget:function(t){var e=this.$refs.scrollContainer.offsetWidth,n=t.offsetLeft,a=t.offsetWidth;n<-this.left?this.left=15-n:n+15>-this.left&&n+a<-this.left+e-15||(this.left=-(n-(e-a)+15))}}},R={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"scrollContainer",staticClass:"scroll-container",on:{wheel:function(e){e.preventDefault(),t.handleScroll(e)}}},[n("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",style:{left:t.left+"px"}},[t._t("default")],2)])},staticRenderFns:[]};var D={components:{ScrollPane:n("VU/8")(M,R,!1,function(t){n("5dJx")},"data-v-3704aafb",null).exports},data:function(){return{visible:!1,top:0,left:0,selectedTag:{}}},computed:{visitedViews:function(){return this.$store.state.tagsView.visitedViews}},watch:{$route:function(){this.addViewTags(),this.moveToCurrentTag()},visible:function(t){t?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},mounted:function(){this.addViewTags()},methods:{generateRoute:function(){return!!this.$route.name&&this.$route},isActive:function(t){return t.path===this.$route.path||t.name===this.$route.name},addViewTags:function(){var t=this.generateRoute();if(!t)return!1;this.$store.dispatch("addVisitedViews",t)},moveToCurrentTag:function(){var t=this,e=this.$refs.tag;this.$nextTick(function(){var n=!0,a=!1,i=void 0;try{for(var r,s=I()(e);!(n=(r=s.next()).done);n=!0){var o=r.value;if(o.to===t.$route.path){t.$refs.scrollPane.moveToTarget(o.$el);break}}}catch(t){a=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}})},closeSelectedTag:function(t){var e=this;this.$store.dispatch("delVisitedViews",t).then(function(n){if(e.isActive(t)){var a=n.slice(-1)[0];a?e.$router.push(a.path):e.$router.push("/")}})},closeOthersTags:function(){var t=this;this.$router.push(this.selectedTag.path),this.$store.dispatch("delOthersViews",this.selectedTag).then(function(){t.moveToCurrentTag()})},closeAllTags:function(){this.$store.dispatch("delAllViews"),this.$router.push("/")},openMenu:function(t,e){this.visible=!0,this.selectedTag=t,this.left=e.clientX,this.top=e.clientY},closeMenu:function(){this.visible=!1}}},B={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tags-view-container"},[n("scroll-pane",{ref:"scrollPane",staticClass:"tags-view-wrapper"},t._l(Array.from(t.visitedViews),function(e){return n("router-link",{key:e.path,ref:"tag",refInFor:!0,staticClass:"tags-view-item",class:t.isActive(e)?"active":"",attrs:{to:e.path},nativeOn:{contextmenu:function(n){n.preventDefault(),t.openMenu(e,n)}}},[t._v("\n      "+t._s(e.title)+"\n      "),n("span",{staticClass:"el-icon-close",on:{click:function(n){n.preventDefault(),n.stopPropagation(),t.closeSelectedTag(e)}}})])})),t._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"contextmenu",style:{left:t.left+"px",top:t.top+"px"}},[n("li",{on:{click:function(e){t.closeSelectedTag(t.selectedTag)}}},[t._v("关闭")]),t._v(" "),n("li",{on:{click:t.closeOthersTags}},[t._v("关闭其他")]),t._v(" "),n("li",{on:{click:t.closeAllTags}},[t._v("关闭所有")])])],1)},staticRenderFns:[]};var F=n("VU/8")(D,B,!1,function(t){n("furk"),n("p+yI")},"data-v-cea79994",null).exports,W={render:function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"app-main",staticStyle:{"min-height":"100%"}},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("keep-alive",{attrs:{include:this.cachedViews}},[e("router-view")],1)],1)],1)},staticRenderFns:[]},U={name:"layout",components:{Navbar:S,Sidebar:O,AppMain:n("VU/8")({name:"AppMain",computed:{cachedViews:function(){return this.$store.state.tagsView.cachedViews}}},W,!1,null,null,null).exports,TagsView:F},computed:{sidebar:function(){return this.$store.state.app.sidebar}}},G={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"app-wrapper",class:{hideSidebar:!this.sidebar.opened}},[e("sidebar",{staticClass:"sidebar-container"}),this._v(" "),e("div",{staticClass:"main-container"},[e("navbar"),this._v(" "),e("tags-view"),this._v(" "),e("app-main")],1)],1)},staticRenderFns:[]};var N=n("VU/8")(U,G,!1,function(t){n("Eq/C")},"data-v-284bf304",null).exports;a.default.use(u.a);var j=[{path:"/login",component:function(){return n.e(1).then(n.bind(null,"T+/8"))},hidden:!0},{path:"/404",component:function(){return n.e(0).then(n.bind(null,"+H76"))},hidden:!0},{path:"",component:N,redirect:"dashboard",children:[{path:"dashboard",component:function(){return n.e(3).then(n.bind(null,"ARoL"))},name:"dashboard",meta:{title:"首页",noCache:!0}}]},{path:"/menu",component:N,name:"menu",children:[{path:"index",name:"menuManage",component:function(){return n.e(4).then(n.bind(null,"sS1m"))},meta:{title:"菜单管理",noCache:!0}}]},{path:"/config",component:N,name:"config",children:[{path:"index",name:"configManage",component:function(){return n.e(2).then(n.bind(null,"3W8Q"))},meta:{title:"配置管理",noCache:!0}}]},{path:"*",redirect:"/404",hidden:!0}],H=new u.a({scrollBehavior:function(){return{y:0}},routes:j}),z=n("lbHh"),q=n.n(z),P={state:{sidebar:{opened:!+q.a.get("sidebarStatus")}},mutations:{TOGGLE_SIDEBAR:function(t){t.sidebar.opened?q.a.set("sidebarStatus",1):q.a.set("sidebarStatus",0),t.sidebar.opened=!t.sidebar.opened}},actions:{ToggleSideBar:function(t){(0,t.commit)("TOGGLE_SIDEBAR")}}},Y=n("Gu7T"),X=n.n(Y),J=n("//Fk"),Q=n.n(J),Z=n("d7EF"),K=n.n(Z),tt={state:{visitedViews:[],cachedViews:[]},mutations:{ADD_VISITED_VIEWS:function(t,e){t.visitedViews.some(function(t){return t.path===e.path})||(t.visitedViews.push({name:e.name,path:e.path,title:e.meta.title||"no-name"}),e.meta.noCache||t.cachedViews.push(e.name))},DEL_VISITED_VIEWS:function(t,e){var n=!0,a=!1,i=void 0;try{for(var r,s=I()(t.visitedViews.entries());!(n=(r=s.next()).done);n=!0){var o=r.value,c=K()(o,2),l=c[0];if(c[1].path===e.path){t.visitedViews.splice(l,1);break}}}catch(t){a=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}var u=!0,d=!1,h=void 0;try{for(var f,p=I()(t.cachedViews);!(u=(f=p.next()).done);u=!0){var m=f.value;if(m===e.name){var v=t.cachedViews.indexOf(m);t.cachedViews.splice(v,1);break}}}catch(t){d=!0,h=t}finally{try{!u&&p.return&&p.return()}finally{if(d)throw h}}},DEL_OTHERS_VIEWS:function(t,e){var n=!0,a=!1,i=void 0;try{for(var r,s=I()(t.visitedViews.entries());!(n=(r=s.next()).done);n=!0){var o=r.value,c=K()(o,2),l=c[0];if(c[1].path===e.path){t.visitedViews=t.visitedViews.slice(l,l+1);break}}}catch(t){a=!0,i=t}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}var u=!0,d=!1,h=void 0;try{for(var f,p=I()(t.cachedViews);!(u=(f=p.next()).done);u=!0){var m=f.value;if(m===e.name){var v=t.cachedViews.indexOf(m);t.cachedViews=t.cachedViews.slice(v,m+1);break}}}catch(t){d=!0,h=t}finally{try{!u&&p.return&&p.return()}finally{if(d)throw h}}},DEL_ALL_VIEWS:function(t){t.visitedViews=[],t.cachedViews=[]}},actions:{addVisitedViews:function(t,e){(0,t.commit)("ADD_VISITED_VIEWS",e)},delVisitedViews:function(t,e){var n=t.commit,a=t.state;return new Q.a(function(t){n("DEL_VISITED_VIEWS",e),t([].concat(X()(a.visitedViews)))})},delOthersViews:function(t,e){var n=t.commit,a=t.state;return new Q.a(function(t){n("DEL_OTHERS_VIEWS",e),t([].concat(X()(a.visitedViews)))})},delAllViews:function(t){var e=t.commit,n=t.state;return new Q.a(function(t){e("DEL_ALL_VIEWS"),t([].concat(X()(n.visitedViews)))})}}},et=V.a.create({baseURL:"http://127.0.0.1:80",timeout:15e3,headers:{terminal:"BROWSER"}});et.interceptors.request.use(function(t){return rt.getters.loginState&&(t.headers["X-Token"]=Object(_.a)()),t},function(t){console.log(t),Q.a.reject(t)}),et.interceptors.response.use(function(t){var e=t.data;return 0!==e.errorCode?(e.data instanceof Array?e.data=e.errorMessage:e.data+=e.errorMessage+e.data,Object(i.Message)({message:e.data,type:"warning",duration:5e3}),50008!==e.errorCode&&50012!==e.errorCode&&50014!==e.errorCode||i.MessageBox.confirm("你已被登出，可以取消继续留在该页面，或者重新登录","确定登出",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(function(){rt.dispatch("FedLogOut").then(function(){location.reload()})}),Q.a.reject("error")):t.data},function(t){return console.log("err"+t),Object(i.Message)({message:t.message,type:"error",duration:5e3}),Q.a.reject(t)});var nt=et;var at={state:{loginState:Object(_.a)(),name:"",avatar:"",role:"",menus:[]},mutations:{SET_LOGIN_STATE:function(t,e){t.loginState=e},SET_NAME:function(t,e){t.name=e},SET_AVATAR:function(t,e){t.avatar=e},SET_ROLE:function(t,e){t.role=e},SET_MENUS:function(t,e){t.menus=e}},actions:{GetInfo:function(t){var e=t.commit;return new Q.a(function(t,n){nt({url:"/myinfo",method:"get"}).then(function(n){var a=n.data;e("SET_ROLE",a.roles[0].code),e("SET_NAME",a.name),e("SET_AVATAR",a.avatar),e("SET_MENUS",function t(e){return e.forEach(function(e,n){delete e.parent,e.meta={title:e.title,icon:e.icon},delete e.icon,delete e.createdAt,delete e.deletedAt,e.children&&t(e.children)}),e}(a.menus)),t(n)}).catch(function(t){n(t)})})},LogOut:function(t){var e=t.commit,n=t.state;return new Q.a(function(t,a){(n.loginState,nt({url:"/logout",method:"post"})).then(function(){e("SET_LOGIN_STATE",""),e("SET_ROLE",""),Object(_.b)(),t()}).catch(function(t){a(t)})})},FedLogOut:function(t){var e=t.commit;return new Q.a(function(t){e("SET_LOGIN_STATE",""),Object(_.b)(),t()})}}},it={sidebar:function(t){return t.app.sidebar},visitedViews:function(t){return t.tagsView.visitedViews},loginState:function(t){return t.user.loginState},avatar:function(t){return t.user.avatar},name:function(t){return t.user.name},role:function(t){return t.user.role},menus:function(t){return t.user.menus}};a.default.use(f.a);var rt=new f.a.Store({modules:{app:P,tagsView:tt,user:at},getters:it}),st=(n("uxEr"),n("Y81h")),ot=n.n(st),ct=(n("UVIz"),["/login","/logout"]);H.beforeEach(function(t,e,n){ot.a.start(),"true"===Object(_.a)()?"/login"===t.path?(n({path:"/"}),ot.a.done()):rt.getters.role?n():rt.dispatch("GetInfo").then(function(t){window.myinfo=t.data,n()}).catch(function(t){console.log(t),rt.dispatch("FedLogOut").then(function(){i.Message.error("验证失败，请重新登录!"),n({path:"/login"})})}):-1!==ct.indexOf(t.path)?n():(n("/login"),ot.a.done())}),H.afterEach(function(){ot.a.done()}),a.default.use(r.a,{locale:o.a}),a.default.config.productionTip=!1,new a.default({el:"#app",router:H,store:rt,template:"<App/>",components:{App:l}})},TIfe:function(t,e,n){"use strict";e.a=function(){return i.a.get(r)},e.c=function(t){return i.a.set(r,t)},e.b=function(){return i.a.remove(r)};var a=n("lbHh"),i=n.n(a),r="isLogin"},UVIz:function(t,e){},furk:function(t,e){},hF5t:function(t,e){},"p+yI":function(t,e){},tvR6:function(t,e){},uMhA:function(t,e){},uxEr:function(t,e){},yh13:function(t,e){}},["NHnr"]);